[{"D:\\CreateFlow3\\Client\\src\\index.js":"1","D:\\CreateFlow3\\Client\\src\\App.js":"2","D:\\CreateFlow3\\Client\\src\\reportWebVitals.js":"3","D:\\CreateFlow3\\Client\\src\\Context\\DrawingToolsContext.jsx":"4","D:\\CreateFlow3\\Client\\src\\Context\\History.jsx":"5","D:\\CreateFlow3\\Client\\src\\Canvas.jsx":"6","D:\\CreateFlow3\\Client\\src\\utils\\ShapesLogic.jsx":"7","D:\\CreateFlow3\\Client\\src\\ToolBar\\ColorPalette.jsx":"8","D:\\CreateFlow3\\Client\\src\\utils\\UndoRedo.jsx":"9","D:\\CreateFlow3\\Client\\src\\ToolBar\\Tools.jsx":"10","D:\\CreateFlow3\\Client\\src\\ToolBar\\ShapesMenu.jsx":"11","D:\\CreateFlow3\\Client\\src\\Assets\\CursorStyles.jsx":"12","D:\\CreateFlow3\\Client\\src\\Assets\\Colors.jsx":"13","D:\\CreateFlow3\\Client\\src\\Assets\\ColorSelecter.jsx":"14","D:\\CreateFlow3\\Client\\src\\Assets\\ToolsItemList.jsx":"15","D:\\CreateFlow3\\Client\\src\\Shape_Box\\Circle.jsx":"16","D:\\CreateFlow3\\Client\\src\\Shape_Box\\Triangle.jsx":"17","D:\\CreateFlow3\\Client\\src\\Shape_Box\\Line.jsx":"18","D:\\CreateFlow3\\Client\\src\\Shape_Box\\Ellipse.jsx":"19","D:\\CreateFlow3\\Client\\src\\Shape_Box\\Recatangle.jsx":"20","D:\\CreateFlow3\\Client\\src\\Shape_Box\\Pentagon.jsx":"21","D:\\CreateFlow3\\Client\\src\\Drawing_Tools\\pen.jsx":"22","D:\\CreateFlow3\\Client\\src\\Drawing_Tools\\pencil.jsx":"23","D:\\CreateFlow3\\Client\\src\\Drawing_Tools\\brush.jsx":"24","D:\\CreateFlow3\\Client\\src\\Drawing_Tools\\PaintBucket.jsx":"25","D:\\CreateFlow3\\Client\\src\\Drawing_Tools\\Eraser.jsx":"26","D:\\CreateFlow3\\Client\\src\\Drawing_Tools\\uploadFiles.jsx":"27","D:\\CreateFlow3\\Client\\src\\CanvasSelectionBoard\\SelectionBoard.jsx":"28","D:\\CreateFlow3\\Client\\src\\CanvasSelectionBoard\\CreateBox\\CreateCanvas.jsx":"29","D:\\CreateFlow3\\Client\\src\\RealTimeCommunication\\socketConnection.jsx":"30","D:\\CreateFlow3\\Client\\src\\authPages\\LoginPage\\login.jsx":"31","D:\\CreateFlow3\\Client\\src\\authPages\\RegisterPage\\register.jsx":"32","D:\\CreateFlow3\\Client\\src\\authPages\\RegisterPage\\RegisterPageInput.jsx":"33","D:\\CreateFlow3\\Client\\src\\authPages\\RegisterPage\\RegisterPageFooter.jsx":"34","D:\\CreateFlow3\\Client\\src\\shared\\Components\\InputWithLabel.jsx":"35","D:\\CreateFlow3\\Client\\src\\shared\\utils\\FomValidator.jsx":"36","D:\\CreateFlow3\\Client\\src\\shared\\Components\\AuthBox.js":"37","D:\\CreateFlow3\\Client\\src\\shared\\Components\\RedirectInfo.jsx":"38","D:\\CreateFlow3\\Client\\src\\shared\\Components\\customPrimaryButton.jsx":"39","D:\\CreateFlow3\\Client\\src\\authPages\\LoginPage\\LoginInputs.jsx":"40","D:\\CreateFlow3\\Client\\src\\authPages\\LoginPage\\LoginPageFooter.jsx":"41","D:\\CreateFlow3\\Client\\src\\Actions\\authActions.jsx":"42","D:\\CreateFlow3\\Client\\src\\api.jsx":"43"},{"size":834,"mtime":1698854385546,"results":"44","hashOfConfig":"45"},{"size":622,"mtime":1698944026834,"results":"46","hashOfConfig":"45"},{"size":362,"mtime":1697810219117,"results":"47","hashOfConfig":"45"},{"size":874,"mtime":1698079215602,"results":"48","hashOfConfig":"45"},{"size":1614,"mtime":1698781986715,"results":"49","hashOfConfig":"45"},{"size":15188,"mtime":1698784148916,"results":"50","hashOfConfig":"45"},{"size":3351,"mtime":1698759338624,"results":"51","hashOfConfig":"45"},{"size":1172,"mtime":1698348827253,"results":"52","hashOfConfig":"45"},{"size":1029,"mtime":1698574854358,"results":"53","hashOfConfig":"45"},{"size":3116,"mtime":1698575392155,"results":"54","hashOfConfig":"45"},{"size":1797,"mtime":1698438467299,"results":"55","hashOfConfig":"45"},{"size":642,"mtime":1698584539959,"results":"56","hashOfConfig":"45"},{"size":170,"mtime":1698262799330,"results":"57","hashOfConfig":"45"},{"size":1446,"mtime":1698574854352,"results":"58","hashOfConfig":"45"},{"size":736,"mtime":1698574854353,"results":"59","hashOfConfig":"45"},{"size":479,"mtime":1698407497797,"results":"60","hashOfConfig":"45"},{"size":499,"mtime":1698407005855,"results":"61","hashOfConfig":"45"},{"size":464,"mtime":1698406971260,"results":"62","hashOfConfig":"45"},{"size":493,"mtime":1698434534656,"results":"63","hashOfConfig":"45"},{"size":504,"mtime":1698438482609,"results":"64","hashOfConfig":"45"},{"size":510,"mtime":1698435804948,"results":"65","hashOfConfig":"45"},{"size":239,"mtime":1698086867454,"results":"66","hashOfConfig":"45"},{"size":457,"mtime":1698086682142,"results":"67","hashOfConfig":"45"},{"size":244,"mtime":1698086903476,"results":"68","hashOfConfig":"45"},{"size":292,"mtime":1698224334649,"results":"69","hashOfConfig":"45"},{"size":1597,"mtime":1698086948068,"results":"70","hashOfConfig":"45"},{"size":274,"mtime":1698574854355,"results":"71","hashOfConfig":"45"},{"size":463,"mtime":1698913351387,"results":"72","hashOfConfig":"45"},{"size":1175,"mtime":1698944367141,"results":"73","hashOfConfig":"45"},{"size":396,"mtime":1698952334813,"results":"74","hashOfConfig":"45"},{"size":825,"mtime":1698955476907,"results":"75","hashOfConfig":"45"},{"size":1403,"mtime":1698957909546,"results":"76","hashOfConfig":"45"},{"size":832,"mtime":1698953754157,"results":"77","hashOfConfig":"45"},{"size":1366,"mtime":1698952891898,"results":"78","hashOfConfig":"45"},{"size":517,"mtime":1698953480958,"results":"79","hashOfConfig":"45"},{"size":711,"mtime":1698954881757,"results":"80","hashOfConfig":"45"},{"size":598,"mtime":1698953573185,"results":"81","hashOfConfig":"45"},{"size":628,"mtime":1698952604278,"results":"82","hashOfConfig":"45"},{"size":978,"mtime":1698954379788,"results":"83","hashOfConfig":"45"},{"size":591,"mtime":1698955094818,"results":"84","hashOfConfig":"45"},{"size":1299,"mtime":1698955556524,"results":"85","hashOfConfig":"45"},{"size":740,"mtime":1698957892673,"results":"86","hashOfConfig":"45"},{"size":964,"mtime":1698957204152,"results":"87","hashOfConfig":"45"},{"filePath":"88","messages":"89","suppressedMessages":"90","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},"7kgwp3",{"filePath":"92","messages":"93","suppressedMessages":"94","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"95","messages":"96","suppressedMessages":"97","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"98","messages":"99","suppressedMessages":"100","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"101","messages":"102","suppressedMessages":"103","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"104","messages":"105","suppressedMessages":"106","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"107","usedDeprecatedRules":"91"},{"filePath":"108","messages":"109","suppressedMessages":"110","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"111","messages":"112","suppressedMessages":"113","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"114","messages":"115","suppressedMessages":"116","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"117","messages":"118","suppressedMessages":"119","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"120","usedDeprecatedRules":"91"},{"filePath":"121","messages":"122","suppressedMessages":"123","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"124","messages":"125","suppressedMessages":"126","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"127","messages":"128","suppressedMessages":"129","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"130","messages":"131","suppressedMessages":"132","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"133","messages":"134","suppressedMessages":"135","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"136","messages":"137","suppressedMessages":"138","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"139","messages":"140","suppressedMessages":"141","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"142","messages":"143","suppressedMessages":"144","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"145","messages":"146","suppressedMessages":"147","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"148","messages":"149","suppressedMessages":"150","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"151","messages":"152","suppressedMessages":"153","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"154","messages":"155","suppressedMessages":"156","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"157","messages":"158","suppressedMessages":"159","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"160","messages":"161","suppressedMessages":"162","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"163","messages":"164","suppressedMessages":"165","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"166","messages":"167","suppressedMessages":"168","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"169","messages":"170","suppressedMessages":"171","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"172","messages":"173","suppressedMessages":"174","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"175","messages":"176","suppressedMessages":"177","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"178","messages":"179","suppressedMessages":"180","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"181","messages":"182","suppressedMessages":"183","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"184","messages":"185","suppressedMessages":"186","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"187","messages":"188","suppressedMessages":"189","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"190","messages":"191","suppressedMessages":"192","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"193","messages":"194","suppressedMessages":"195","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"196","messages":"197","suppressedMessages":"198","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"199","messages":"200","suppressedMessages":"201","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"202","messages":"203","suppressedMessages":"204","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"205","messages":"206","suppressedMessages":"207","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"208","messages":"209","suppressedMessages":"210","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"211","messages":"212","suppressedMessages":"213","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"214","messages":"215","suppressedMessages":"216","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"217","messages":"218","suppressedMessages":"219","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"D:\\CreateFlow3\\Client\\src\\index.js",[],[],["220"],"D:\\CreateFlow3\\Client\\src\\App.js",[],[],"D:\\CreateFlow3\\Client\\src\\reportWebVitals.js",[],[],"D:\\CreateFlow3\\Client\\src\\Context\\DrawingToolsContext.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\Context\\History.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\Canvas.jsx",["221","222"],[],"import React, { useState, useEffect, useRef } from \"react\";\r\nimport { useDrawingTools } from \"./Context/DrawingToolsContext\";\r\nimport { useHistory } from \"./Context/History\";\r\nimport ColorPalette from \"./ToolBar/ColorPalette\";\r\nimport Tools from \"./ToolBar/Tools\";\r\nimport UndoRedo from \"./utils/UndoRedo\";\r\nimport ShapesMenu from \"./ToolBar/ShapesMenu\";\r\nimport { Box } from \"@mui/system\";\r\nimport FloodFill from \"q-floodfill\";\r\nimport { useStyles } from \"./Assets/CursorStyles\";\r\nimport {\r\n  drawRectangle,\r\n  drawCircle,\r\n  drawLine,\r\n  drawTriangle,\r\n  drawEllipse,\r\n  drawNSidePolygon,\r\n  drawDashedRectangle,\r\n} from \"./utils/ShapesLogic.jsx\";\r\n\r\nfunction DrawingCanvas() {\r\n  const canvasRef = useRef(null);\r\n  const offCanvasRef = useRef(null);\r\n  const {\r\n    selectedTool,\r\n    selectedColor,\r\n    setSelectedTool,\r\n    lineWidth,\r\n    eraserWidth,\r\n  } = useDrawingTools();\r\n  const { addToHistory } = useHistory();\r\n  const [drawing, setDrawing] = useState(false);\r\n  const [context, setContext] = useState(null);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [uploadFile,setUploadFile] = useState(null)\r\n  const isCustomizable = useRef(false);\r\n  const StartRef = useRef({ startX: 0, startY: 0 });\r\n  const CurrentRef = useRef({ x: -1, y: -1 });\r\n  const ExtremumRef = useRef({ x1: 0, y1: 0, x2: 0, y2: 0 });\r\n  const EndRef = useRef({ endX: 0, endY: 0 });\r\n  const pointRef = useRef({ pt3X: -1 });\r\n  const classes = useStyles();\r\n\r\n\r\n  useEffect(() => {\r\n    saveCanvasState();\r\n  }, []);\r\n\r\n  const SwitchToVirtual = () => {\r\n    offCanvasRef.current.style.zIndex = \"1\";\r\n    console.log(\"Switch to virtual\")\r\n  };\r\n\r\n  const switchToMainCanvas = () => {\r\n    if(selectedTool === \"UploadFiles\") setSelectedTool(\"Pencil\")\r\n    offCanvasRef.current.style.zIndex = \"-1\";\r\n    console.log(\"Switch to main\")\r\n  };\r\n\r\n  /*******************Functions for Adding Customizability and Checking if user Customizing*****************/\r\n\r\n  const addCustomizability = (virtualCtx) => {\r\n    const { e1X, e1Y, e2X, e2Y } = ExtremumRef.current;\r\n    console.log(\"Adding Customizability\", e1X, e1Y, e2X, e2Y);\r\n    isCustomizable.current = true;\r\n    virtualCtx.strokeStyle = selectedColor;\r\n    drawDashedRectangle(e1X, e1Y, e2X, e2Y, virtualCtx);\r\n  };\r\n\r\n  const isUnderCustomization = (x, y) => {\r\n    const { e1X, e1Y, e2X, e2Y } = ExtremumRef.current;\r\n    if (x >= e1X && x <= e2X && y >= e1Y && y <= e2Y) {\r\n      return true;\r\n    } else if (x <= e1X && x >= e2X && y >= e1Y && y <= e2Y) return true;\r\n    else return false;\r\n  };\r\n\r\n  const isUserDragging = (endX, endY) => {\r\n    const { e1X, e1Y, e2X, e2Y } = ExtremumRef.current;\r\n    const dx = 5,\r\n      dy = 5;\r\n    const p1 = { x: e1X, y: e1Y };\r\n    const p2 = { x: e2X, y: e1Y };\r\n    const p3 = { x: e2X, y: e2Y };\r\n    const p4 = { x: e1X, y: e2Y };\r\n    const points = { p1, p2, p3, p4 };\r\n\r\n    for (let i = 0; i < 4; i++) {\r\n      if (\r\n        (endX <= points[i].x + dx || endX >= points[i] - dx) &&\r\n        endY <= points[i].y + dy &&\r\n        endY >= points[i] - dy\r\n      ) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  };\r\n\r\n  const MakeResizable = (endX, endY) => {};\r\n\r\n  const chooseAndRunCustomizingEvent = (endX, endY) => {\r\n    if (isUserDragging) {\r\n      setIsDragging(true);\r\n      MakeDraggable(endX, endY);\r\n      DoCursorStyling();\r\n    } else {\r\n      console.log(\"NO drag\");\r\n      MakeResizable(endX, endY);\r\n    }\r\n  };\r\n\r\n  /*********************  Dragging Feature *************************/\r\n\r\n  const MakeDraggable = (currX, currY) => {\r\n    \r\n    const { x, y } = CurrentRef.current;\r\n    const offsetX = currX - x;\r\n    const offsetY = currY - y;\r\n    const { startX, startY } = StartRef.current;\r\n    StartRef.current = { startX: startX + offsetX, startY: startY + offsetY };\r\n    const { endX, endY } = EndRef.current;\r\n    EndRef.current = { endX: endX + offsetX, endY: endY + offsetY };\r\n    const { e1X, e1Y, e2X, e2Y } = ExtremumRef.current;\r\n    ExtremumRef.current = {\r\n      e1X: e1X + offsetX,\r\n      e1Y: e1Y + offsetY,\r\n      e2X: e2X + offsetX,\r\n      e2Y: e2Y + offsetY,\r\n    };\r\n    pointRef.current = { pt3X: pointRef.current.pt3X + offsetX };\r\n    const virtualCtx = offCanvasRef.current.getContext(\"2d\");\r\n    if (selectedTool === \"UploadFiles\") {\r\n      console.log(\"Uploading files\", e1X + offsetX, e1Y + offsetY);\r\n      renderImage(uploadFile,virtualCtx);\r\n    } else{\r\n      clearVirtualCanvas();\r\n      chooseAndDrawShape(endX + offsetX, endY + offsetY, virtualCtx);\r\n    }\r\n    CurrentRef.current = { x: currX, y: currY };\r\n  };\r\n\r\n  /************************ Mini features *************************/\r\n  const DoCursorStyling = (x, y) => {\r\n    if (isUnderCustomization(x, y)) {\r\n      offCanvasRef.current.style.cursor = \"move\";\r\n    } else offCanvasRef.current.style.cursor = \"crosshair\";\r\n  };\r\n\r\n  const clearVirtualCanvas = () => {\r\n    const offCanvas = offCanvasRef.current;\r\n    const virtualCtx = offCanvas.getContext(\"2d\");\r\n    virtualCtx.clearRect(0, 0, offCanvas.width, offCanvas.height);\r\n  };\r\n\r\n  const checkAndDrawOnMainCanvas = () => {\r\n    console.log(\"Clicking\")\r\n    if (isCustomizable.current) {\r\n      const { endX, endY } = EndRef.current;\r\n      console.log(\"Switching to main\")\r\n      switchToMainCanvas()\r\n      drawOnMainCanvas(endX, endY);\r\n    }\r\n  };\r\n\r\n  const saveCanvasState = () => {\r\n    const canvas = canvasRef.current;\r\n    const snapShot = canvas.toDataURL();\r\n    console.log(\"State saved\");\r\n    addToHistory(snapShot);\r\n  };\r\n\r\n  const redrawCanvas = (imageData) => {\r\n    const canvas = canvasRef.current;\r\n    const ctx = canvas.getContext(\"2d\");\r\n    const img = new Image();\r\n    img.src = imageData;\r\n    img.onload = () => {\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n      ctx.drawImage(img, 0, 0);\r\n    };\r\n  };\r\n\r\n  /********************* Drawing on Main Canvas *************************/\r\n  const drawOnMainCanvas = (endX, endY) => {\r\n    EndRef.current = { endX: -1, endY: -1 };\r\n    isCustomizable.current = false;\r\n    const canvas = canvasRef.current;\r\n    const ctx = canvas.getContext(\"2d\");\r\n    ctx.strokeStyle = selectedColor;\r\n    if(selectedTool === \"UploadFiles\"){\r\n      renderImage(uploadFile,ctx)\r\n      drawLine(0,0,20,20,ctx)\r\n      switchToMainCanvas()\r\n      console.log(\"Line drawn\")\r\n    }\r\n    else{\r\n      chooseAndDrawShape(endX, endY, ctx);\r\n    }\r\n    pointRef.current = { pt3X: -1 };\r\n    CurrentRef.current = { x: -1, y: -1 };\r\n    console.log(\"Hii\")\r\n    saveCanvasState();\r\n  };\r\n  /************************ Feature: Drawing  shape on chosen canvas **************************************/\r\n  const chooseAndDrawShape = (endX, endY, ctx) => {\r\n    ctx.beginPath();\r\n    const { startX, startY } = StartRef.current;\r\n    if (selectedTool === \"Rectangle\") {\r\n      const { e1X, e1Y, e2X, e2Y } = drawRectangle(\r\n        startX,\r\n        startY,\r\n        endX,\r\n        endY,\r\n        ctx\r\n      );\r\n      ExtremumRef.current = { e1X, e1Y, e2X, e2Y };\r\n    } else if (selectedTool === \"Circle\") {\r\n      const { e1X, e2X, e1Y, e2Y } = drawCircle(\r\n        startX,\r\n        startY,\r\n        endX,\r\n        endY,\r\n        ctx\r\n      );\r\n      ExtremumRef.current = { e1X, e1Y, e2X, e2Y };\r\n    } else if (selectedTool === \"Line\") {\r\n      const { e1X, e1Y, e2X, e2Y } = drawLine(startX, startY, endX, endY, ctx);\r\n      ExtremumRef.current = { e1X, e1Y, e2X, e2Y };\r\n    } else if (selectedTool === \"Triangle\") {\r\n      const { pt3X } = pointRef.current;\r\n      if (pt3X === -1) pointRef.current = { pt3X: startX - (endX - startX) };\r\n      else {\r\n        const { e1X, e1Y, e2X, e2Y } = drawTriangle(\r\n          startX,\r\n          startY,\r\n          endX,\r\n          endY,\r\n          ctx,\r\n          pt3X\r\n        );\r\n        ExtremumRef.current = { e1X, e1Y, e2X, e2Y };\r\n        console.log(ExtremumRef.current);\r\n      }\r\n    } else if (selectedTool === \"Ellipse\") {\r\n      const { e1X, e1Y, e2X, e2Y } = drawEllipse(\r\n        startX,\r\n        startY,\r\n        endX,\r\n        endY,\r\n        ctx\r\n      );\r\n      ExtremumRef.current = { e1X, e1Y, e2X, e2Y };\r\n    } else if (selectedTool === \"Pentagon\") {\r\n      const { e1X, e1Y, e2X, e2Y } = drawNSidePolygon(\r\n        startX,\r\n        endX,\r\n        startY,\r\n        endY,\r\n        5,\r\n        ctx\r\n      );\r\n      ExtremumRef.current = { e1X, e1Y, e2X, e2Y };\r\n    }\r\n  };\r\n  /******************* UseEffect : For deciding current working canvas and some canvas styling setup *****************/\r\n  useEffect(() => {\r\n    if (\r\n      selectedTool === \"Pencil\" ||\r\n      selectedTool === \"Eraser\" ||\r\n      selectedTool === \"Brush\" ||\r\n      selectedTool === \"Pen\" ||\r\n      selectedTool === \"PaintBucket\"\r\n    ) {\r\n      switchToMainCanvas();\r\n      const canvas = canvasRef.current;\r\n      const ctx = canvas.getContext(\"2d\");\r\n\r\n      if (selectedTool === \"Eraser\") {\r\n        ctx.strokeStyle = \"white\";\r\n        ctx.lineWidth = eraserWidth;\r\n      } else {\r\n        ctx.strokeStyle = selectedColor;\r\n        ctx.lineWidth = lineWidth;\r\n      }\r\n      setContext(ctx);\r\n    } else{\r\n      console.log(\"Switching to virtual\")\r\n      SwitchToVirtual();\r\n    }\r\n  }, [selectedColor, lineWidth, selectedTool, eraserWidth]);\r\n\r\n  /************************** Main Canvas Events *****************************/\r\n  const handleMouseDown = (e) => {\r\n    if (selectedTool === \"PaintBucket\") {\r\n      const imgData = context.getImageData(\r\n        0,\r\n        0,\r\n        canvasRef.current.width,\r\n        canvasRef.current.height\r\n      );\r\n      const floodFill = new FloodFill(imgData);\r\n      floodFill.fill(context.strokeStyle, e.clientX, e.clientY, 0);\r\n      context.putImageData(floodFill.imageData, 0, 0);\r\n    } else {\r\n      setDrawing(true);\r\n      context.beginPath();\r\n      context.moveTo(e.nativeEvent.offsetX, e.nativeEvent.offsetY);\r\n    }\r\n  };\r\n\r\n  const handleMouseMove = (e) => {\r\n    if (!drawing) return;\r\n    context.lineTo(e.nativeEvent.offsetX, e.nativeEvent.offsetY);\r\n    context.stroke();\r\n  };\r\n\r\n  const handleMouseUp = (e) => {\r\n    setDrawing(false);\r\n    context.closePath();\r\n    console.log(\"Saving\")\r\n    saveCanvasState();\r\n  };\r\n\r\n  /************************** Virtual Canvas Events *****************************/\r\n\r\n  const handleVirtualMouseDown = (e) => {\r\n    console.log(isCustomizable.current);\r\n    const x = e.nativeEvent.offsetX;\r\n    const y = e.nativeEvent.offsetY;\r\n    if (isCustomizable.current) {\r\n      const { endX, endY } = EndRef.current;\r\n      console.log(\"Customizing\");\r\n      if (isUnderCustomization(x, y)) {\r\n        DoCursorStyling(x, y);\r\n        CurrentRef.current = { x, y };\r\n        return;\r\n      } else {\r\n        console.log(\"Drawing on main Canvas\");\r\n        drawOnMainCanvas(endX, endY);\r\n      }\r\n    }\r\n    if (selectedTool !== \"UploadFiles\") {\r\n      setDrawing(true);\r\n      StartRef.current = { startX: x, startY: y };\r\n    }\r\n  };\r\n\r\n  const handleVirtualMouseMove = (e) => {\r\n    const offCanvas = offCanvasRef.current;\r\n    const ctx = offCanvas.getContext(\"2d\");\r\n    ctx.strokeStyle = selectedColor;\r\n    const endX = e.nativeEvent.offsetX;\r\n    const endY = e.nativeEvent.offsetY;\r\n    if (isCustomizable.current) {\r\n      DoCursorStyling(endX, endY);\r\n      if (CurrentRef.current.x !== -1) {\r\n        chooseAndRunCustomizingEvent(endX, endY);\r\n        return;\r\n      }\r\n    }\r\n    if (!drawing || isCustomizable.current) return;\r\n    ctx.clearRect(0, 0, offCanvas.width, offCanvas.height);\r\n    chooseAndDrawShape(endX, endY, ctx);\r\n  };\r\n\r\n  const handleVirtualMouseUp = (e) => {\r\n    setDrawing(false);\r\n    console.log(\"Drawing \", drawing);\r\n    console.log(\"Mouse Up\", isCustomizable.current);\r\n    const offCanvas = offCanvasRef.current;\r\n    const virtualCtx = offCanvas.getContext(\"2d\");\r\n    if (isDragging) {\r\n      setIsDragging(false);\r\n      CurrentRef.current = { x: -1, y: -1 };\r\n      const { e1X, e1Y, e2X, e2Y } = ExtremumRef.current;\r\n      drawDashedRectangle(e1X, e1Y, e2X, e2Y, virtualCtx);\r\n    }\r\n    if (isCustomizable.current) return;\r\n    else if (drawing) {\r\n      const endX = e.nativeEvent.offsetX;\r\n      const endY = e.nativeEvent.offsetY;\r\n      EndRef.current = { endX, endY };\r\n      chooseAndDrawShape(endX, endY, virtualCtx);\r\n      addCustomizability(virtualCtx);\r\n    }\r\n  };\r\n\r\n  //  <------ File selection and Image Rendering functionality ------>\r\n  const selectFile = () => {\r\n    const fileInput = document.getElementById(\"fileInput\");\r\n    fileInput.click();\r\n    fileInput.value = null\r\n  };\r\n\r\n  const handleFileSelect = async (event) => {\r\n    const file = event.target.files[0];\r\n    console.log(\"selected file \", file)\r\n    if(file){\r\n      setUploadFile(file)\r\n      ExtremumRef.current = {\r\n        e1X: 150,\r\n        e1Y: 150,\r\n        e2X: 150 + 200,\r\n        e2Y: 150 + 200,\r\n      };\r\n      StartRef.current = {startX:150,startY:150}\r\n      SwitchToVirtual();\r\n      const offCanvas = offCanvasRef.current;\r\n      const virtualCtx = offCanvas.getContext(\"2d\");\r\n      renderImage(file,virtualCtx);\r\n      addCustomizability(virtualCtx);\r\n    }\r\n    else{\r\n      switchToMainCanvas()\r\n    }\r\n  };\r\n\r\n  const renderImage =  (file,ctx) => {\r\n    if (file) {\r\n        clearVirtualCanvas()\r\n        const reader = new FileReader();\r\n        const {startX,startY} = StartRef.current;\r\n        reader.onload = function (e) {\r\n          const image = new Image();\r\n          image.src = e.target.result;\r\n          image.onload = function () {\r\n            ctx.drawImage(image, startX, startY, 200, 200);\r\n          };\r\n        };\r\n        reader.readAsDataURL(file);\r\n        console.log(\"Image drawn\")\r\n    } \r\n  };\r\n\r\n\r\n  return (\r\n    <div style={{ cursor: \"./Assets/cursor/eraser.jpg\" }}>\r\n      <Box\r\n        sx={{\r\n          position: \"absolute\",\r\n          display: \"flex\",\r\n          flexDirection: \"row\",\r\n          zIndex: 3,\r\n        }}\r\n        onClick={() => {\r\n          checkAndDrawOnMainCanvas();\r\n        }}\r\n      >\r\n        <Tools setIsOpen={setIsOpen} selectFile={selectFile} />\r\n        <ShapesMenu SwitchToVirtual={SwitchToVirtual} />\r\n        <ColorPalette />\r\n        <UndoRedo isOpen={isOpen} redrawCanvas={redrawCanvas} />\r\n      </Box>\r\n\r\n      <canvas\r\n        className={classes[selectedTool]}\r\n        ref={canvasRef}\r\n        onMouseDown={handleMouseDown}\r\n        onMouseMove={handleMouseMove}\r\n        onMouseUp={handleMouseUp}\r\n        width={window.innerWidth}\r\n        height={window.innerHeight}\r\n      />\r\n      <input\r\n        type=\"file\"\r\n        id=\"fileInput\"\r\n        style={{ display: \"none\" }}\r\n        onChange={handleFileSelect}\r\n      />\r\n      <canvas\r\n        ref={offCanvasRef}\r\n        width={window.innerWidth}\r\n        height={window.innerHeight}\r\n        id=\"offCanvas\"\r\n        style={{\r\n          cursor: \"crosshair\",\r\n          backgroundColor: \"transparent\",\r\n          position: \"absolute\",\r\n          top: 0,\r\n          zIndex: -1,\r\n        }}\r\n        onMouseDown={handleVirtualMouseDown}\r\n        onMouseMove={handleVirtualMouseMove}\r\n        onMouseUp={handleVirtualMouseUp}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DrawingCanvas;\r\n","D:\\CreateFlow3\\Client\\src\\utils\\ShapesLogic.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\ToolBar\\ColorPalette.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\utils\\UndoRedo.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\ToolBar\\Tools.jsx",["223"],[],"import * as React from \"react\";\r\nimport SpeedDial from \"@mui/material/SpeedDial\";\r\nimport SpeedDialAction from \"@mui/material/SpeedDialAction\";\r\nimport GestureIcon from \"@mui/icons-material/Gesture\";\r\nimport { Popover, Slider, Typography } from \"@mui/material\";\r\nimport { useState } from \"react\";\r\nimport { useDrawingTools } from \"../Context/DrawingToolsContext\";\r\nimport toolsList from \"../Assets/ToolsItemList\";\r\nimport { useCallback } from \"react\";\r\n\r\nexport default function Tools({ setIsOpen, selectFile }) {\r\n  const { lineWidth, setLineWidth, selectedTool, setSelectedTool } =\r\n    useDrawingTools();\r\n  const [open, setOpen] = useState(false);\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [min, setMin] = useState(1);\r\n  const [max, setMax] = useState(10);\r\n\r\n  const handleOpen = (event) => {\r\n    event.stopPropagation();\r\n    setAnchorEl(event.currentTarget);\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleSelection = useCallback(\r\n    (e, tool) => {\r\n      e.preventDefault();\r\n      if (tool === \"UploadFiles\") {\r\n        selectFile();\r\n      } else if (tool === \"Pen\" || tool === \"Brush\") {\r\n        setMin(5);\r\n        if (selectedTool !== tool) setLineWidth(5);\r\n        setMax(20);\r\n      } else {\r\n        setMin(1);\r\n        if (selectedTool !== tool) setLineWidth(1);\r\n        setMax(10);\r\n      }\r\n\r\n      setSelectedTool(tool);\r\n    },\r\n    [setLineWidth, selectedTool, setSelectedTool]\r\n  );\r\n\r\n  return (\r\n    <div\r\n      onMouseEnter={() => setIsOpen(true)}\r\n      onMouseLeave={() => setIsOpen(false)}\r\n    >\r\n      <SpeedDial\r\n        ariaLabel=\"SpeedDial basic example\"\r\n        sx={{\r\n          position: \"absolute\",\r\n          paddingTop: 0.5,\r\n          paddingLeft: 0.5,\r\n          display: \"inline-block\",\r\n        }}\r\n        icon={<GestureIcon />}\r\n        direction=\"down\"\r\n      >\r\n        {toolsList.map((action) => (\r\n          <SpeedDialAction\r\n            key={action.name}\r\n            icon={action.icon}\r\n            tooltipTitle={action.name}\r\n            onClick={\r\n              action.name === \"Thickness\"\r\n                ? handleOpen\r\n                : (e) => handleSelection(e, action.name)\r\n            }\r\n            sx={{\r\n              backgroundColor:\r\n                selectedTool === action.name ? \"gray\" : \"transparent\",\r\n            }}\r\n          ></SpeedDialAction>\r\n        ))}\r\n      </SpeedDial>\r\n      <Popover\r\n        open={open}\r\n        anchorEl={anchorEl}\r\n        onClose={handleClose}\r\n        anchorOrigin={{\r\n          vertical: \"bottom\",\r\n          horizontal: \"center\",\r\n        }}\r\n        transformOrigin={{\r\n          vertical: \"top\",\r\n          horizontal: \"center\",\r\n        }}\r\n        p={2}\r\n      >\r\n        <Slider\r\n          value={lineWidth}\r\n          onChange={(e, newValue) => setLineWidth(newValue)}\r\n          min={min}\r\n          max={max}\r\n        />\r\n        <Typography variant=\"body2\" sx={{ textAlign: \"center\", padding: 2 }}>\r\n          Thickness: {lineWidth}\r\n        </Typography>\r\n      </Popover>\r\n    </div>\r\n  );\r\n}\r\n","D:\\CreateFlow3\\Client\\src\\ToolBar\\ShapesMenu.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\Assets\\CursorStyles.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\Assets\\Colors.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\Assets\\ColorSelecter.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\Assets\\ToolsItemList.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\Shape_Box\\Circle.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\Shape_Box\\Triangle.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\Shape_Box\\Line.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\Shape_Box\\Ellipse.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\Shape_Box\\Recatangle.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\Shape_Box\\Pentagon.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\Drawing_Tools\\pen.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\Drawing_Tools\\pencil.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\Drawing_Tools\\brush.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\Drawing_Tools\\PaintBucket.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\Drawing_Tools\\Eraser.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\Drawing_Tools\\uploadFiles.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\CanvasSelectionBoard\\SelectionBoard.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\CanvasSelectionBoard\\CreateBox\\CreateCanvas.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\RealTimeCommunication\\socketConnection.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\authPages\\LoginPage\\login.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\authPages\\RegisterPage\\register.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\authPages\\RegisterPage\\RegisterPageInput.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\authPages\\RegisterPage\\RegisterPageFooter.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\shared\\Components\\InputWithLabel.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\shared\\utils\\FomValidator.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\shared\\Components\\AuthBox.js",[],[],"D:\\CreateFlow3\\Client\\src\\shared\\Components\\RedirectInfo.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\shared\\Components\\customPrimaryButton.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\authPages\\LoginPage\\LoginInputs.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\authPages\\LoginPage\\LoginPageFooter.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\Actions\\authActions.jsx",[],[],"D:\\CreateFlow3\\Client\\src\\api.jsx",[],[],{"ruleId":"224","replacedBy":"225"},{"ruleId":"226","severity":1,"message":"227","line":48,"column":6,"nodeType":"228","endLine":48,"endColumn":8,"suggestions":"229"},{"ruleId":"226","severity":1,"message":"230","line":292,"column":6,"nodeType":"228","endLine":292,"endColumn":59,"suggestions":"231"},{"ruleId":"226","severity":1,"message":"232","line":47,"column":5,"nodeType":"228","endLine":47,"endColumn":50,"suggestions":"233"},"no-new-object",["234"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'saveCanvasState'. Either include it or remove the dependency array.","ArrayExpression",["235"],"React Hook useEffect has a missing dependency: 'switchToMainCanvas'. Either include it or remove the dependency array.",["236"],"React Hook useCallback has a missing dependency: 'selectFile'. Either include it or remove the dependency array. If 'selectFile' changes too often, find the parent component that defines it and wrap that definition in useCallback.",["237"],"no-object-constructor",{"desc":"238","fix":"239"},{"desc":"240","fix":"241"},{"desc":"242","fix":"243"},"Update the dependencies array to be: [saveCanvasState]",{"range":"244","text":"245"},"Update the dependencies array to be: [selectedColor, lineWidth, selectedTool, eraserWidth, switchToMainCanvas]",{"range":"246","text":"247"},"Update the dependencies array to be: [setSelectedTool, selectFile, selectedTool, setLineWidth]",{"range":"248","text":"249"},[1566,1568],"[saveCanvasState]",[9221,9274],"[selectedColor, lineWidth, selectedTool, eraserWidth, switchToMainCanvas]",[1459,1504],"[setSelectedTool, selectFile, selectedTool, setLineWidth]"]